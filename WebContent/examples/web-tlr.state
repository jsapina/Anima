[B(idA,idw1,'noPage,'Welcome ? query-empty,session-empty,('idEmail / "email2") : ('pass / "secretAlice") : 'user / "alice",mes-empty,history-empty,1)]bra-empty[mes-empty][S(('Admin-Logout,updateDB(s("adminPage"), s("free")),{(TRUE => 'Home)},{nav-empty}) : ('Administration,'adminPage := selectDB(s("adminPage")) ; if 'adminPage = s("free") then updateDB(s("adminPage"), getSession(s("user"))) ; setSession(s("adminPage"), s("free")) else setSession(s("adminPage"), s("busy")) fi,{(s("adminPage") '== s("busy") => 'Home)},{(TRUE -> 'Admin-Logout ? query-empty)}) : ('Change-account,skip,{cont-empty},{(TRUE -> 'Home ? ('newPass '= "") : 'newUser '= "")}) : ('Email-list,'u := getSession(s("user")) ; 'es := selectDB('u '. s("-email")) ; setSession(s("idEmails-found"), 'es),{cont-empty},{(TRUE -> 'Home ? query-empty) : (TRUE -> 'View-email ? 'idEmail '= "")}) : ('Home,'login := getSession(s("login")) ; if 'login = null then 'u := getQuery('user) ; 'p := getQuery('pass) ; 'p1 := selectDB('u) ; if 'p = 'p1 then 'r := selectDB('u '. s("-role")) ; setSession(s("user"), 'u) ; setSession(s("role"), 'r) ; setSession(s("login"), s("ok")) else setSession(s("login"), s("no")) fi fi,{(s("changeLogin") '== s("no") => 'Change-account) : (s("login") '== s("no") => 'Welcome) : (s("login") '== s("ok") => 'Home)},{(TRUE -> 'Change-account ? query-empty) : (TRUE -> 'Email-list ? query-empty) : (TRUE -> 'Logout ? query-empty) : (s("role") '== s("admin") -> 'Administration ? query-empty)}) : ('Logout,clearSession,{(TRUE => 'Welcome)},{nav-empty}) : ('View-email,'u := getSession(s("user")) ; 'id := getQuery('idEmail) ; 'e := selectDB('id) ; setSession(s("text-email"), 'e),{cont-empty},{(TRUE -> 'Email-list ? query-empty) : (TRUE -> 'Home ? query-empty)}) : ('Welcome,skip,{cont-empty},{(TRUE -> 'Home ? ('pass '= "") : 'user '= "")}),us(idA,session-empty),mes-empty,readymes-empty,(s("adminPage") ; s("free")) (s("alice") ; s("secretAlice")) (s("alice-email") ; s("email1")) (s("alice-role") ; s("admin")) (s("bob") ; s("secretBob")) (s("bob-email") ; s("email2")) (s("bob-role") ; s("admin")) (s("email1") ; s("text-email-one")) (s("email2") ; s("text-email-two")))]